<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ORACLEæ‹†åˆ†å­—ç¬¦ä¸²å‡½æ•°åº”ç”¨</title>
      <link href="/2023/03/23/ORACLE%E6%8B%86%E5%88%86%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0%E5%BA%94%E7%94%A8/"/>
      <url>/2023/03/23/ORACLE%E6%8B%86%E5%88%86%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0%E5%BA%94%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h2 id="ORACLEä¸­æ‹†åˆ†å­—ç¬¦ä¸²ä¸­çš„é”®å€¼å¯¹åº”ç”¨"><a href="#ORACLEä¸­æ‹†åˆ†å­—ç¬¦ä¸²ä¸­çš„é”®å€¼å¯¹åº”ç”¨" class="headerlink" title="ORACLEä¸­æ‹†åˆ†å­—ç¬¦ä¸²ä¸­çš„é”®å€¼å¯¹åº”ç”¨"></a>ORACLEä¸­æ‹†åˆ†å­—ç¬¦ä¸²ä¸­çš„é”®å€¼å¯¹åº”ç”¨</h2><blockquote><p>ä¸šåŠ¡åœºæ™¯ï¼šè®¾å¤‡Açš„å¤šä¸ªç«¯å£æ•°æ®é€šè¿‡é”®å€¼å¯¹çš„æ–¹å¼ä¼ å…¥ï¼Œéœ€è¦å¯¹å…¶ä¸åŒç«¯å£çš„æŒ‡æ ‡å€¼è¿›è¡Œæ±‡èšæ“ä½œï¼Œå› ä¸ºå†å²é—ç•™é—®é¢˜+ä½¿ç”¨åœºæ™¯è¾ƒå°‘JAVAå…¥åº“ä¸æƒ³å†™å¯¹åº”æ¨¡æ¿æ‹†åˆ† åªèƒ½ç”¨æ•°æ®åº“æ¥æ“ä½œå•¦ğŸ¤£ğŸ¤£</p></blockquote><p>æ¶‰åŠçš„ä¸¤ä¸ªè¡¨ï¼šå…¥åº“è¡¨ï¼šDEMO1ï¼Œæ‹†åˆ†æ•°æ®åçš„ä¸­é—´è¡¨ DEMO1_MID<br>è¡¨ç»“æ„å’Œæ ·ä¾‹æ•°æ®å¦‚ä¸‹ï¼š<br>DEMO1:</p><table><thead><tr><th align="center">KEY_P</th><th align="center">KPI_1</th><th align="center">KPI_2</th></tr></thead><tbody><tr><td align="center">A</td><td align="center">INDEX_1,10;INDEX_2,20;</td><td align="center">INDEX_3,30;</td></tr><tr><td align="center">B</td><td align="center">INDEX_4,40;</td><td align="center">INDEX_5,50;INDEX_6,60;</td></tr></tbody></table><p>DEMO1_MID:</p><table><thead><tr><th align="center">KEY_P</th><th align="center">KEY_</th><th align="center">VALUE</th></tr></thead></table><h3 id="1-é¦–å…ˆè¦æŠŠå­—æ®µè¿›è¡Œæ‹†åˆ†"><a href="#1-é¦–å…ˆè¦æŠŠå­—æ®µè¿›è¡Œæ‹†åˆ†" class="headerlink" title="1.é¦–å…ˆè¦æŠŠå­—æ®µè¿›è¡Œæ‹†åˆ†"></a>1.é¦–å…ˆè¦æŠŠå­—æ®µè¿›è¡Œæ‹†åˆ†</h3><p>æ‹†åˆ†å‡½æ•°ï¼šsplit_key_value_pairs</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">FUNCTION</span> split_key_value_pairs(</span><br><span class="line">    input_string <span class="keyword">IN</span> VARCHAR2,</span><br><span class="line">    delimiter <span class="keyword">IN</span> VARCHAR2 <span class="keyword">DEFAULT</span> <span class="string">&#x27;;&#x27;</span>,</span><br><span class="line">    key_value_delimiter <span class="keyword">IN</span> VARCHAR2 <span class="keyword">DEFAULT</span> <span class="string">&#x27;,&#x27;</span></span><br><span class="line">) <span class="keyword">RETURN</span> SYS_REFCURSOR</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line">    output_cursor SYS_REFCURSOR;</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">    <span class="keyword">OPEN</span> output_cursor <span class="keyword">FOR</span></span><br><span class="line">        <span class="keyword">SELECT</span> SUBSTR(input_string, <span class="number">1</span>, INSTR(input_string, key_value_delimiter)<span class="number">-1</span>) <span class="keyword">AS</span> key,</span><br><span class="line">               SUBSTR(input_string, INSTR(input_string, key_value_delimiter)<span class="operator">+</span><span class="number">1</span>) <span class="keyword">AS</span> <span class="keyword">value</span></span><br><span class="line">          <span class="keyword">FROM</span> (</span><br><span class="line">               <span class="keyword">SELECT</span> <span class="built_in">TRIM</span>(REGEXP_SUBSTR(input_string, <span class="string">&#x27;[^&#x27;</span> <span class="operator">||</span> delimiter <span class="operator">||</span> <span class="string">&#x27;]+&#x27;</span>, <span class="number">1</span>, LEVEL)) <span class="keyword">AS</span> input_string</span><br><span class="line">                 <span class="keyword">FROM</span> DUAL</span><br><span class="line">           <span class="keyword">CONNECT</span> <span class="keyword">BY</span> LEVEL <span class="operator">&lt;=</span> REGEXP_COUNT(input_string, <span class="string">&#x27;[^&#x27;</span> <span class="operator">||</span> delimiter <span class="operator">||</span> <span class="string">&#x27;]+&#x27;</span>)</span><br><span class="line">               )</span><br><span class="line">         <span class="keyword">WHERE</span> input_string <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span>;</span><br><span class="line">    <span class="keyword">RETURN</span> output_cursor;</span><br><span class="line"><span class="keyword">END</span>;</span><br></pre></td></tr></table></figure><p>åˆ©ç”¨è¿™ä¸ªå‡½æ•°å¯ä»¥è¿”å›ä¸€ä¸ªâ€™SYS_REFCURSORâ€™ç±»å‹çš„æ¸¸æ ‡ï¼Œå…¶ä¸­åŒ…å«ä¸¤åˆ—ï¼Œä¸€åˆ—ä¸ºé”®ï¼Œä¸€åˆ—ä¸ºå€¼ï¼Œæ¸¸æ ‡å¯ä»¥ä½¿ç”¨ SELECT è¯­å¥æ¥è¯»å–ã€‚</p><h3 id="2-åœ¨å­˜å‚¨è¿‡ç¨‹æˆ–è€…å‘½ä»¤è¡Œç”¨æ¸¸æ ‡å¯¹å…¶è¿›è¡Œè¯»å–"><a href="#2-åœ¨å­˜å‚¨è¿‡ç¨‹æˆ–è€…å‘½ä»¤è¡Œç”¨æ¸¸æ ‡å¯¹å…¶è¿›è¡Œè¯»å–" class="headerlink" title="2.åœ¨å­˜å‚¨è¿‡ç¨‹æˆ–è€…å‘½ä»¤è¡Œç”¨æ¸¸æ ‡å¯¹å…¶è¿›è¡Œè¯»å–"></a>2.åœ¨å­˜å‚¨è¿‡ç¨‹æˆ–è€…å‘½ä»¤è¡Œç”¨æ¸¸æ ‡å¯¹å…¶è¿›è¡Œè¯»å–</h3><p>åŸºæœ¬ä¸Šéƒ½æ˜¯åœ¨å­˜å‚¨è¿‡ç¨‹äº†ï¼Œå‘½ä»¤è¡Œå°±ç”¨æ¥æµ‹è¯•æµ‹è¯•æ•ˆæœã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DECLARE</span></span><br><span class="line">  output_cur SYS_REFCURSOR;</span><br><span class="line">  key_value_pair VARCHAR2(<span class="number">30000</span>) ;</span><br><span class="line">  output_key VARCHAR2(<span class="number">4000</span>);</span><br><span class="line">  output_value VARCHAR2(<span class="number">4000</span>);</span><br><span class="line">  v_key_p VARCHAR2(<span class="number">4000</span>);</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">  <span class="keyword">FOR</span> cur <span class="keyword">IN</span> </span><br><span class="line">      (<span class="keyword">SELECT</span>  KEY_P,KPI_1,KPI_2 <span class="keyword">FROM</span> DEMO1 <span class="comment">--WHERE  å¯èƒ½æœ‰å…¶ä»–çš„é™åˆ¶æ¡ä»¶</span></span><br><span class="line">      )   </span><br><span class="line">    LOOP</span><br><span class="line">      key_value_pair :<span class="operator">=</span> cur.KPI_1 <span class="operator">||</span> cur.KPI_2;</span><br><span class="line">      v_key_p :<span class="operator">=</span> cur.KEY_P;</span><br><span class="line">      output_cur :<span class="operator">=</span> split_key_value_pairs(key_value_pair);</span><br><span class="line">        LOOP</span><br><span class="line">            <span class="keyword">FETCH</span> output_cur <span class="keyword">INTO</span> output_key, output_value;</span><br><span class="line">            EXIT <span class="keyword">WHEN</span> output_cur<span class="operator">%</span>NOTFOUND;</span><br><span class="line">            <span class="keyword">INSERT</span> <span class="keyword">INTO</span> DEMO1_MID</span><br><span class="line">            <span class="keyword">VALUES</span> </span><br><span class="line">            (</span><br><span class="line">            v_key_p,</span><br><span class="line">            output_key,</span><br><span class="line">            output_value</span><br><span class="line">            );</span><br><span class="line">        <span class="keyword">END</span> LOOP;</span><br><span class="line">        <span class="keyword">CLOSE</span> output_cur;</span><br><span class="line">    <span class="keyword">END</span> LOOP;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"><span class="operator">/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åˆ©ç”¨äº†åŒå¾ªç¯ï¼Œå…ˆåœ¨DEMO1é‡Œé¢ä¸€æ¬¡æ‰«ææ¯ä¸€è¡Œï¼Œå°†KPI_1,KPI_2è¿›è¡Œæ‹¼æ¥åˆ©ç”¨å‡½æ•°æ‹†åˆ†ï¼Œå†™è¿›ä¸­é—´è¡¨DEMO1_MID<br>æœ€åçš„æ•°æ®ç»“æœå°±æ˜¯é…±ç´«ï¼š</p><table><thead><tr><th align="center">KEY_P</th><th align="center">KEY_</th><th align="center">VALUE</th></tr></thead><tbody><tr><td align="center">A</td><td align="center">INDEX_1</td><td align="center">10</td></tr><tr><td align="center">A</td><td align="center">INDEX_2</td><td align="center">20</td></tr><tr><td align="center">A</td><td align="center">INDEX_3</td><td align="center">30</td></tr><tr><td align="center">B</td><td align="center">INDEX_4</td><td align="center">40</td></tr><tr><td align="center">B</td><td align="center">INDEX_5</td><td align="center">50</td></tr><tr><td align="center">B</td><td align="center">INDEX_6</td><td align="center">60</td></tr></tbody></table><p>è¿™æ ·ï¼Œè®¾å¤‡ä»¥åŠå„ä¸ªç«¯å£æ•°æ®å°±å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œäº†ğŸ‘€</p>]]></content>
      
      
      <categories>
          
          <category> ORACLE </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title>åˆ†ç±»</title>
      <link href="/categories/index.html"/>
      <url>/categories/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/css/custom.css"/>
      <url>/css/custom.css</url>
      
        <content type="html"><![CDATA[/* é¡µè„šä¸å¤´å›¾é€æ˜ */#footer {  background: transparent !important;}#page-header {  background: transparent !important;}/* ç™½å¤©æ¨¡å¼é®ç½©é€æ˜ */#footer::before {  background: transparent !important;}#page-header::before {  background: transparent !important;}/* å¤œé—´æ¨¡å¼é®ç½©é€æ˜ */[data-theme="dark"] #footer::before {  background: transparent !important;}[data-theme="dark"] #page-header::before {  background: transparent !important;}/* ä¸ªäººä¿¡æ¯å¡ç‰‡èƒŒæ™¯å›¾ */[data-theme="light"] #aside-content > .card-widget.card-info {    background-image: url(https://sourcebucket.s3.ladydaily.com/img/snowflower.webp);    background-repeat: no-repeat;    background-attachment: inherit;    background-size: 100%;  }  [data-theme="dark"] #aside-content > .card-widget.card-info {    background-image: url(https://sourcebucket.s3.ladydaily.com/img/aurora.webp);    background-repeat: no-repeat;    background-attachment: inherit;    background-size: 100%;  }/*å¯¼èˆªæ ä¿®æ”¹*//* ä¸€çº§èœå•å±…ä¸­ */#nav .menus_items {  position: absolute !important;  width: fit-content !important;  left: 50% !important;  transform: translateX(-50%) !important;}/* å­èœå•æ¨ªå‘å±•ç¤º */#nav .menus_items .menus_item:hover .menus_item_child {  display: flex !important;}/* è¿™é‡Œçš„2æ˜¯ä»£è¡¨å¯¼èˆªæ çš„ç¬¬2ä¸ªå…ƒç´ ï¼Œå³æœ‰å­èœå•çš„å…ƒç´ ï¼Œå¯ä»¥æŒ‰è‡ªå·±éœ€æ±‚ä¿®æ”¹ */.menus_items .menus_item:nth-child(5) .menus_item_child {  left: -30px;}  ]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>å‹é“¾</title>
      <link href="/link/index.html"/>
      <url>/link/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>æ ‡ç­¾</title>
      <link href="/tags/index.html"/>
      <url>/tags/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>å…³äº</title>
      <link href="/about/index.html"/>
      <url>/about/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>éŸ³ä¹</title>
      <link href="/music/index.html"/>
      <url>/music/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>ç”µå½±</title>
      <link href="/movies/index.html"/>
      <url>/movies/index.html</url>
      
        <content type="html"><![CDATA[]]></content>
      
    </entry>
    
    
  
</search>
